# adb 是

## 介绍

- 简介

  Android 调试桥 (adb) 是一种功能多样的命令行工具，可让您与设备进行通信。

  adb 命令可用于执行各种设备操作（例如安装和调试应用），并提供对 Unix shell（可用来在设备上运行各种命令）的访问权限。它是一种客户端-服务器程序，包括以下三个组件：

  客户端：用于发送命令。客户端在开发计算机上运行。您可以通过发出 adb 命令来从命令行终端调用客户端。

  守护进程 (adbd)：在设备上运行命令。守护进程在每个设备上作为后台进程运行。

  服务器：管理客户端和守护进程之间的通信。服务器在开发机器上作为后台进程运行。

  adb 包含在 Android SDK 平台工具软件包中。您可以使用 SDK 管理器下载此软件包，该管理器会将其安装在 android_sdk/platform-tools/ 下。或者，如果您需要独立的 Android SDK 平台工具软件包，可以点击此处进行下载。

  要了解如何连接设备以进行 adb 通信，包括如何使用 Connection Assistant 对常见问题进行排查，请参阅在硬件设备上运行应用。

- 网站

  [Android 调试桥 (adb)网站](https://developer.android.google.cn/studio/command-line/adb)

## 使用

- 在设备上启用 adb 调试

  要在通过 USB 连接的设备上使用 adb，您必须在设备的系统设置中启用 USB 调试（位于开发者选项下）。

  在搭载 Android 4.2 及更高版本的设备上，“开发者选项”屏幕默认情况下处于隐藏状态。如需将其显示出来，请依次转到设置 > 关于手机，然后点按版本号七次。返回上一屏幕，在底部可以找到开发者选项。

  在某些设备上，“开发者选项”屏幕所在的位置或命名方式可能有所不同。

  现在，您已经可以通过 USB 连接设备。您可以通过从 android_sdk/platform-tools/ 目录执行 adb devices 来验证设备是否已连接。如果已连接，您将看到设备名称以“设备”形式列出。

  **注意：当您连接搭载 Android 4.2.2 或更高版本的设备时，系统会显示一个对话框，询问您是否接受允许通过此计算机进行调试的 RSA 密钥。这种安全机制可以保护用户设备，因为它可以确保只有在您能够解锁设备并确认对话框的情况下才能执行 USB 调试和其他 adb 命令。**

  要详细了解如何通过 USB 连接到设备，请参阅在硬件设备上运行应用。

  通过 WLAN 连接到设备
  一般情况下，adb 通过 USB 与设备进行通信，但您也可以在通过 USB 完成一些初始设置后通过 WLAN 使用 adb，如下所述。不过，如果您开发的是 Wear OS 应用，则应参阅调试 Wear OS 应用指南，其中提供了有关如何通过 WLAN 和蓝牙使用 adb 的特别说明。

  将 Android 设备和 adb 主机连接到这两者都可以访问的同一 WLAN 网络。请注意，并非所有接入点都适用；您可能需要使用防火墙已正确配置为支持 adb 的接入点。

  如果您要连接到 Wear OS 设备，请关闭与该设备配对的手机上的蓝牙。

  使用 USB 数据线将设备连接到主机。

  设置目标设备以监听端口 5555 上的 TCP/IP 连接。

        adb tcpip 5555

  拔掉连接目标设备的 USB 数据线。

  找到 Android 设备的 IP 地址。例如，对于 Nexus 设备，您可以在设置 > 关于平板电脑（或关于手机）> 状态 > IP 地址下找到 IP 地址。或者，对于 Wear OS 设备，您可以在设置 > WLAN 设置 > 高级 > IP 地址下找到 IP 地址。

  通过 IP 地址连接到设备。

        adb connect device_ip_address

  确认主机已连接到目标设备：

        $ adb devices
        List of devices attached
        device_ip_address:5555 device

  现在，您可以开始操作了！

  如果 adb 连接断开：

  确保主机仍与 Android 设备连接到同一个 WLAN 网络。
  通过再次执行 adb connect 步骤重新连接。
  如果上述操作未解决问题，重置 adb 主机：
  adb kill-server

  然后，从头开始操作。

## 错误

- 解决 adb connect 连接 Android 设备报错：由于目标计算机积极拒绝，无法连接

  用 usb 连接手机,开启开发者权限 - usb 调试

  输入`adb devices`,可以看到已经连接的设备

  输入`adb tcpip 5555`(设置端口号为 5555)

  `adb connection 192.16.**.*:5555` 连接,

  连接成功测试。拔掉 usb 线 输入`adb devices`即可查看到连接列表

  `adb disconnect 192.168.1.61` 断开连接
